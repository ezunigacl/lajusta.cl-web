<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Justa | La verdad financiera</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@1&family=Inter:wght@300;400;500;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        // Global variable for current UF value, updated by fetchFinancialIndicators
        let currentUF = 37985.50; 
        const defaultUFValue = 37985.50; 

        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        ocean: '#022C43',
                        oceanLight: '#053B58',
                        oceanDark: '#011826',
                        acid: '#CCFF00',
                        acidHover: '#b3e600',
                        lightText: '#E6F4F1'
                    },
                    fontFamily: {
                        serif: ['Instrument Serif', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Space Mono', 'monospace'],
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                    },
                    keyframes: {
                        'modal-open': {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' },
                        },
                        'modal-close': {
                            '0%': { opacity: '1', transform: 'scale(1)' },
                            '100%': { opacity: '0', transform: 'scale(0.95)' },
                        },
                        'fade-in': {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        'fade-in-up': {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    },
                    animation: {
                        'modal-open': 'modal-open 0.3s ease-out forwards',
                        'modal-close': 'modal-close 0.3s ease-out forwards',
                        'fade-in': 'fade-in 0.5s ease-out forwards',
                        'fade-in-up': 'fade-in-up 0.5s ease-out forwards',
                    },
                }
            }
        }
    </script>

    <style>
        body { background-color: #022C43; color: #E6F4F1; overflow-x: hidden; }
        .font-serif { font-family: 'Instrument Serif', serif; font-style: italic; }
        .font-mono { font-family: 'Space Mono', monospace; }
        .text-glow { text-shadow: 0 0 20px rgba(204, 255, 0, 0.4); }
        .glass-panel { 
            background: rgba(5, 59, 88, 0.3); 
            backdrop-filter: blur(16px); 
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08); 
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        .grid-bg { 
            background-image: linear-gradient(rgba(204, 255, 0, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(204, 255, 0, 0.03) 1px, transparent 1px); 
            background-size: 40px 40px; background-position: center top;
        }
        .btn-3d { transition: all 0.1s ease; box-shadow: 4px 4px 0px rgba(0,0,0,0.5); }
        .btn-3d:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0px rgba(0,0,0,0.5); }
        .card-hover { transition: all 0.4s ease; }
        .card-hover:hover {
            transform: translateY(-5px); border-color: rgba(204, 255, 0, 0.5);
            box-shadow: 0 10px 40px -10px rgba(204, 255, 0, 0.15);
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #022C43; }
        ::-webkit-scrollbar-thumb { background: #053B58; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #CCFF00; }
        .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .input-premium {
            background: rgba(1, 24, 38, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.2s;
            font-family: 'Space Mono', monospace;
        }
        .input-premium:focus { 
            border-color: #CCFF00; 
            outline: none; 
            box-shadow: 0 0 10px rgba(204, 255, 0, 0.2); 
            background: rgba(1, 24, 38, 0.8);
        }
        .input-premium::placeholder {
            color: #4a5c70; 
        }
    </style>
</head>
<body class="grid-bg relative antialiased selection:bg-acid selection:text-ocean">

    <div id="messageBox" class="fixed top-4 left-1/2 -translate-x-1/2 hidden z-[1000] transition-all duration-300 max-w-sm w-full animate-fade-in-up" role="alert">
        <div class="p-4 rounded-xl shadow-xl font-mono" id="messageBoxContent">
            <p id="messageText" class="font-bold text-center"></p>
        </div>
    </div>
    
    <div id="expressModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-oceanDark/90 backdrop-blur-md" onclick="toggleExpressModal()"></div>
        <div class="relative w-full max-w-[380px] animate-fade-in">
            <div class="glass-panel rounded-2xl p-6 shadow-2xl border border-white/10 flex flex-col overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-acid opacity-5 blur-2xl rounded-full -mr-10 -mt-10"></div>
                <button onclick="toggleExpressModal()" class="absolute top-4 right-4 text-gray-400 hover:text-acid z-20">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
                <div class="text-center mb-6 relative z-10">
                    <h1 class="font-serif text-3xl italic text-acid tracking-wide inline-flex items-center gap-2">La Justa<span class="text-white">.</span></h1>
                    <p class="font-mono text-[9px] uppercase tracking-[0.25em] text-white/50 mt-1">Simulador Express v1.0</p>
                    <div class="mt-3 inline-block bg-oceanLight/50 border border-white/10 px-2 py-1 rounded-md">
                        <span class="text-[9px] font-bold text-acid uppercase tracking-widest block">UF HOY: <span id="modalUFShow" class="text-white font-mono font-bold">...</span></span>
                    </div>
                </div>
                <div id="express-form" class="space-y-4 relative z-10 animate-fade-in">
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-[10px] font-bold text-acid uppercase mb-1.5 ml-1 font-mono">Tu Edad</label>
                            <input type="number" id="ex-edad" value="65" class="input-premium w-full rounded-lg px-3 py-2 text-center text-lg font-bold" min="18" max="99">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-acid uppercase mb-1.5 ml-1 font-mono">Género</label>
                            <div class="flex gap-1 h-[46px]">
                                <button onclick="setExGender('M')" id="ex-btn-M" class="flex-1 rounded-l-lg border border-acid bg-acid text-ocean text-xs font-bold transition-colors">M</button>
                                <button onclick="setExGender('F')" id="ex-btn-F" class="flex-1 rounded-r-lg border border-white/10 bg-oceanLight/50 text-xs font-bold hover:bg-oceanLight transition-colors text-white/70">F</button>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-acid uppercase mb-1.5 ml-1 font-mono">Estado Civil</label>
                        <select id="ex-estadoCivil" class="input-premium w-full rounded-lg px-3 py-2.5 text-xs appearance-none cursor-pointer">
                            <option value="soltero">Soltero(a) / Divorciado(a)</option>
                            <option value="casado">Casado(a) / Pareja Civil</option>
                            <option value="viudo">Viudo(a)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-acid uppercase mb-1.5 ml-1 font-mono">Saldo Acumulado AFP</label>
                        <input type="text" id="ex-saldo" placeholder="10.000.000" oninput="formatExCLP(this)" class="input-premium w-full rounded-lg px-3 py-2.5 font-bold text-lg text-center text-acid text-glow">
                    </div>
                    <div class="flex items-center justify-between p-3 bg-oceanLight/30 rounded-lg border border-white/5">
                        <span class="text-xs font-bold text-white font-mono">¿Incluir PGU? (Si edad $\ge$ 65)</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="ex-pgu-toggle" class="sr-only peer" checked>
                            <div class="w-9 h-5 bg-oceanDark rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-acid after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white/80 after:rounded-full after:h-4 after:w-4 after:transition-all"></div>
                        </label>
                    </div>
                    <button onclick="calcularExpress()" class="btn-3d w-full bg-acid text-ocean font-extrabold py-3.5 rounded-lg uppercase tracking-widest text-xs">Simular Pensión</button>
                </div>
                <div id="express-result" class="hidden text-center py-4 relative z-10 animate-fade-in-up">
                    <span class="text-[9px] font-mono text-white/50 uppercase tracking-[0.2em]">Monto Mensual Estimado (CLP)</span>
                    <div id="ex-resultado-monto" class="text-4xl font-mono font-bold text-acid my-4 text-glow">$0</div>
                    <a href="simulador.html" class="btn-3d block w-full bg-acid text-ocean font-extrabold py-3.5 rounded-lg uppercase tracking-widest text-[10px] hover:bg-white transition-all">Ver Informe Completo </a>
                    <button onclick="resetExpress()" class="text-[9px] font-mono text-white/40 uppercase hover:text-white transition-colors mt-4">Reiniciar Cálculo</button>
                </div>
            </div>
        </div>
    </div>

    <nav class="fixed w-full z-50 glass-panel border-b-0 border-white/5">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center gap-6">
                    <a href="index.html" class="flex items-center gap-3 group flex-shrink-0">
                        <img src="Logo.jpg" alt="Logo" class="h-10 w-10 rounded-lg border border-white/10 group-hover:border-acid transition-colors object-cover">
                        <span class="font-serif text-2xl md:text-3xl text-acid tracking-wide">La Justa<span class="text-white">.</span></span>
                    </a>
                    <div class="hidden lg:flex items-center gap-4 bg-oceanLight/30 border border-white/10 px-4 py-1.5 rounded-lg backdrop-blur-md">
                        <div class="flex flex-col items-start leading-none border-r border-white/10 pr-4">
                            <span class="text-[9px] font-bold text-acid uppercase tracking-widest mb-0.5">UF HOY</span>
                            <span id="navUF" class="font-mono text-white text-xs font-bold animate-pulse">...</span>
                        </div>
                        <div class="flex flex-col items-start leading-none">
                            <span class="text-[9px] font-bold text-acid uppercase tracking-widest mb-0.5">UTM MES</span>
                            <span id="navUTM" class="font-mono text-white text-xs font-bold animate-pulse">...</span>
                        </div>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8 font-mono text-sm">
                        <a href="#inicio" class="text-white hover:text-acid transition-colors duration-300">INICIO</a>
                        <a href="#que-hacemos" class="text-white hover:text-acid transition-colors duration-300">SERVICIOS</a>
                        <a href="#tools" class="text-acid hover:text-white transition-colors duration-300 glow-sm">[ HERRAMIENTAS ]</a>
                        <a href="#academia" class="text-white hover:text-acid transition-colors duration-300">ACADEMIA</a>
                        <a href="#login" id="nav-login-desktop" class="border border-acid text-acid px-4 py-2 hover:bg-acid hover:text-ocean transition-all duration-300 btn-3d">ACCESO</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="text-white hover:text-acid p-2 focus:outline-none">
                        <i data-lucide="menu" class="w-8 h-8"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-oceanDark/95 backdrop-blur-xl border-t border-white/10 absolute w-full left-0">
            <div class="px-4 pt-2 pb-6 space-y-2 font-mono text-sm">
                <a href="#inicio" class="block px-3 py-4 text-white hover:text-acid border-b border-white/5">INICIO</a>
                <a href="simulador.html" class="block px-3 py-4 text-white hover:text-acid border-b border-white/5">SIMULADOR</a>
                <a href="#tools" class="block px-3 py-4 text-acid hover:text-white border-b border-white/5">HERRAMIENTAS</a>
                <a href="academia.html" class="block px-3 py-4 text-white hover:text-acid border-b border-white/5">ACADEMIA</a>
                <a href="pgu.html" class="block px-3 py-4 text-white hover:text-acid border-b border-white/5">PGU / BONO HIJO</a>
                <a href="#login" id="nav-login-mobile" class="block px-3 py-4 text-acid hover:text-white border-b border-white/5">ACCESO</a>
            </div>
        </div>
    </nav>

    <section id="inicio" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
        <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-acid opacity-10 blur-[100px] rounded-full pointer-events-none"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center lg:text-left">
            <div class="lg:w-2/3 fade-in-up" style="animation-delay: 0.1s;">
                <div class="inline-flex items-center gap-2 px-3 py-1 border border-acid/30 rounded-full bg-oceanLight/30 backdrop-blur-sm mb-6">
                    <span class="w-2 h-2 rounded-full bg-acid animate-pulse"></span>
                    <span class="text-xs font-mono text-acid tracking-widest uppercase">Fintech de Soluciones Técnicas</span>
                </div>
                <h1 class="font-serif text-6xl md:text-8xl leading-[0.9] mb-6 text-white text-glow">Tu Jubliación <br/> clara <br/> <span class="text-acid text-glow">sin letra chica.</span></h1>
                <p class="mt-4 max-w-lg text-lg text-gray-300 font-light leading-relaxed font-sans mb-10 mx-auto lg:mx-0">Usamos tecnología y experiencia legal para que recibas la pensión que te corresponde.</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start font-mono text-sm">
                    <button onclick="toggleExpressModal()" class="btn-3d bg-acid text-ocean px-8 py-4 font-bold flex items-center justify-center gap-2 hover:bg-white transition-colors cursor-pointer">CALCULADORA RÁPIDA <i data-lucide="calculator" class="w-4 h-4"></i></button>
                    <a href="#tools" class="btn-3d border border-white/20 text-white px-8 py-4 hover:border-acid hover:text-acid bg-ocean/50 backdrop-blur-sm transition-colors text-center uppercase tracking-widest">Nuestras Soluciones</a>
                </div>
            </div>
        </div>
    </section>

   <section id="autoridad" class="py-24 border-y border-white/5 bg-oceanLight/10 relative overflow-hidden">
    <div class="max-w-6xl mx-auto px-6 relative z-10">
        <div class="mb-16">
            <span class="font-mono text-acid text-[10px] tracking-[0.3em] uppercase mb-2 block">// CAPA_DE_VALIDACIÓN_HUMANA</span>
            <h2 class="font-serif-italic text-4xl md:text-5xl text-white italic">Experiencia que da tranquilidad.</h2>
            <div class="mt-6 space-y-4 max-w-3xl">
                <p class="text-paper/60 text-lg leading-relaxed">
                    A diferencia de otros desarrollos digitales, el núcleo de nuestra plataforma no es solo código, sino la experiencia certificada. Esta sección detalla el respaldo regulatorio y técnico que asegura que cada recomendación emitida por el sistema cumple con los más altos estándares de la Superintendencia de Pensiones.
                </p>
                <p class="text-acid/80 font-mono text-xs uppercase tracking-widest leading-relaxed">
                    Nuestra propuesta de valor reside en la sinergia generacional: unimos la capacidad técnica certificada con la presencia tecnológica más avanzada. Dos mundos, una misma misión.
                </p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-stretch">
            <!-- Los Dos Mundos -->
            <div class="lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Carlos Zúñiga -->
                <div class="glass-panel p-8 border-l-4 border-acid flex flex-col">
                    <div class="mb-6 opacity-50">
                        <i data-lucide="shield-check" class="text-acid w-8 h-8"></i>
                    </div>
                    <h3 class="font-serif-italic text-3xl text-white mb-2 italic">Carlos Zúñiga A.</h3>
                    <p class="font-mono text-[9px] text-acid uppercase tracking-widest mb-6">Fundador // Asesor Previsional Reg. N° 1207</p>
                    <p class="text-sm text-paper/60 leading-relaxed font-light grow">
                        Aporta la base técnica infalible y el respaldo regulatorio necesario. Su registro activo ante la Superintendencia de Pensiones valida la idoneidad legal detrás de cada dato del sistema.
                    </p>
                </div>

                <!-- Eduardo Zúñiga -->
                <div class="glass-panel p-8 border-l-4 border-white/20 flex flex-col">
                    <div class="mb-6 opacity-50">
                        <i data-lucide="cpu" class="text-white w-8 h-8"></i>
                    </div>
                    <h3 class="font-serif-italic text-3xl text-white mb-2 italic">Eduardo Zúñiga</h3>
                    <p class="font-mono text-[9px] text-paper/40 uppercase tracking-widest mb-6">Fundador // Arquitectura Fintech</p>
                    <p class="text-sm text-paper/60 leading-relaxed font-light grow">
                        Responsable de la infraestructura tecnológica y la experiencia de usuario. Su visión permite que la complejidad técnica se transforme en herramientas digitales fluidas y transparentes.
                    </p>
                </div>
            </div>

            <!-- Panel de Registro Consolidado -->
            <div class="lg:col-span-4 h-full">
                <div class="glass-panel p-10 flex flex-col items-center text-center border-acid/20 border h-full justify-center">
                    <div class="w-16 h-16 bg-acid/10 border border-acid/30 rounded-full flex items-center justify-center mb-6">
                        <i data-lucide="badge-check" class="w-8 h-8 text-acid"></i>
                    </div>
                    <h4 class="font-mono text-[10px] text-white uppercase mb-2 tracking-widest">Estatus de Certificación</h4>
                    <p class="text-[9px] text-paper/40 font-mono mb-8 uppercase leading-relaxed">Superintendencia de Pensiones <br> Registro Público de Asesores</p>
                    
                    <div class="font-mono text-5xl font-bold text-acid mb-8 tracking-tighter">1207</div>

                    <a href="https://www.spensiones.cl/apps/consultaRAP/AsesoresVigentes" target="_blank" class="btn-3d w-full bg-acid text-ocean font-mono font-bold text-[10px] py-4 uppercase tracking-widest flex items-center justify-center gap-2">
                        Verificar Credenciales <i data-lucide="external-link" class="w-3 h-3"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
    
    <section id="que-hacemos" class="py-20 border-t border-white/5 relative bg-oceanDark/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-glow">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <div class="group"><div class="w-12 h-12 border border-acid/30 rounded-full flex items-center justify-center mb-6 text-acid group-hover:bg-acid group-hover:text-ocean transition-all duration-300"><i data-lucide="cpu" class="w-6 h-6"></i></div><h3 class="font-mono text-xl text-white mb-3">Algoritmos, no Vendedores</h3><p class="text-gray-400 font-sans text-sm leading-relaxed">Nuestros cálculos son matemáticos, no dependen de comisiones ni de ventas.</p></div>
                <div class="group"><div class="w-12 h-12 border border-acid/30 rounded-full flex items-center justify-center mb-6 text-acid group-hover:bg-acid group-hover:text-ocean transition-all duration-300"><i data-lucide="shield-check" class="w-6 h-6"></i></div><h3 class="font-mono text-xl text-white mb-3">Bienestar para tu empresa</h3><p class="text-gray-400 font-sans text-sm leading-relaxed">Plataforma de gestión para empresas: visualiza indicadores de bienestar y toma decisiones basadas en datos reales del equipo.</p></div>
                <div class="group"><div class="w-12 h-12 border border-acid/30 rounded-full flex items-center justify-center mb-6 text-acid group-hover:bg-acid group-hover:text-ocean transition-all duration-300"><i data-lucide="terminal" class="w-6 h-6"></i></div><h3 class="font-mono text-xl text-white mb-3">Cero Enredos</h3><p class="text-gray-400 font-sans text-sm leading-relaxed">Transformamos la normativa compleja en decisiones fáciles de tomar.</p></div>
            </div>
        </div>
    </section>

    <section id="manifiesto" class="py-32 bg-ocean relative overflow-hidden flex items-center justify-center">
        <div class="absolute inset-0 grid-bg opacity-30"></div>
        <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
            <span class="font-mono text-acid text-xs tracking-[0.3em] uppercase mb-4 block">Manifiesto 01</span>
            <h2 class="font-serif text-4xl md:text-6xl leading-tight text-white mb-8 text-glow">
                "La asimetría de información es el <span class="text-acid/80">impuesto más caro</span> que pagas. <br/> 
                <span class="text-acid text-glow">Democratizar los datos</span> no es caridad, es justicia."
            </h2>
            <div class="h-1 w-24 bg-acid mx-auto mb-8"></div>
            <p class="font-sans text-gray-400 text-lg max-w-2xl mx-auto leading-relaxed">
                En La Justa, no somos vendedores de productos. Somos auditores de tu futuro. 
                Nuestra tecnología nace para eliminar la "letra chica" y devolverle el poder de decisión al titular de los fondos.
            </p>
        </div>
    </section>

   <section class="py-24 bg-oceanDark/50 relative overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center mb-16">
            <h2 class="font-serif text-4xl md:text-5xl text-white italic mb-4">Modelo de Impacto La Justa</h2>
            <div class="h-1 w-24 bg-acid mx-auto mb-6"></div>
            <p class="text-gray-400 font-mono text-xs uppercase tracking-[0.3em]">Democratización Previsional & Bienestar Organizacional</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            
            <div class="glass-panel p-8 border-t-2 border-t-acid/30 hover:border-t-acid transition-all group">
                <span class="font-mono text-acid text-xs font-bold tracking-tighter mb-4 block">01 // ACCESO_UNIVERSAL</span>
                <h3 class="font-serif text-2xl text-paper italic mb-4 group-hover:text-acid transition-colors">Verdad para Todos</h3>
                <p class="text-gray-400 text-sm leading-relaxed">
                    Democratizamos la alta consultoría previsional. Ponemos a disposición de cada ciudadano herramientas técnicas de élite para auditar su futuro sin sesgos comerciales.
                </p>
            </div>

            <div class="glass-panel p-8 border-t-2 border-t-acid/30 hover:border-t-acid transition-all group">
                <span class="font-mono text-acid text-xs font-bold tracking-tighter mb-4 block">02 // CLARIDAD_TÉCNICA</span>
                <h3 class="font-serif text-2xl text-paper italic mb-4 group-hover:text-acid transition-colors">Transparencia Real</h3>
                <p class="text-gray-400 text-sm leading-relaxed">
                    Traducimos la complejidad del sistema en datos accionables. Nuestro motor V3.1 elimina la incertidumbre, entregando proyecciones basadas en la matemática más estricta.
                </p>
            </div>

            <div class="glass-panel p-8 border-t-2 border-t-acid/30 hover:border-t-acid transition-all group">
                <span class="font-mono text-acid text-xs font-bold tracking-tighter mb-4 block">03 // SOLUCIÓN_RRHH</span>
                <h3 class="font-serif text-2xl text-paper italic mb-4 group-hover:text-acid transition-colors">Valor Corporativo</h3>
                <p class="text-gray-400 text-sm leading-relaxed">
                    Potenciamos el bienestar financiero en las organizaciones. Ayudamos a Recursos Humanos a reducir el estrés previsional de sus colaboradores mediante educación y tecnología.
                </p>
            </div>

            <div class="glass-panel p-8 border-t-2 border-t-acid/30 hover:border-t-acid transition-all group">
                <span class="font-mono text-acid text-xs font-bold tracking-tighter mb-4 block">04 // EMPODERAMIENTO</span>
                <h3 class="font-serif text-2xl text-paper italic mb-4 group-hover:text-acid transition-colors">Decisión Técnica</h3>
                <p class="text-gray-400 text-sm leading-relaxed">
                    Entregamos la hoja de ruta definitiva para el retiro. Si el mercado ofrece menos de lo que la matemática permite, el usuario lo sabrá con respaldo técnico total.
                </p>
            </div>

        </div>
    </div>
    
    <div class="absolute top-0 right-0 -translate-y-1/2 translate-x-1/2 w-[600px] h-[600px] bg-acid/5 rounded-full blur-[120px] pointer-events-none"></div>
</section>

    <!-- HUB DE HERRAMIENTAS (NÚCLEO) -->
    <section id="tools" class="py-24 relative border-t border-white/5">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[500px] bg-acid opacity-5 blur-[120px] rounded-full pointer-events-none"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex flex-col md:flex-row justify-between items-end mb-16">
                <div><h2 class="font-serif text-5xl text-white mb-2 text-glow">Hub de Herramientas</h2><p class="text-gray-400 font-mono text-sm">/ Acceso_Directo_Sistema_Central</p></div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8">
                <div class="glass-panel p-8 rounded-none card-hover group relative flex flex-col justify-between h-[450px] border-acid/30 shadow-[0_0_30px_rgba(204,255,0,0.05)]">
                    <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-acid text-ocean px-3 py-1 font-mono text-[10px] font-bold tracking-widest uppercase">Más Utilizado</div>
                    <div class="absolute top-0 right-0 p-4 opacity-20"><i data-lucide="arrow-up-right" class="text-acid w-6 h-6"></i></div>
                    <div><div class="w-16 h-16 bg-acid/10 rounded-full flex items-center justify-center mb-6 border border-acid/20 group-hover:border-acid transition-colors"><i data-lucide="bar-chart-2" class="text-acid w-8 h-8"></i></div><h3 class="font-serif text-3xl text-white mb-2">Simulador Pensión</h3><p class="font-mono text-xs text-acid mb-4 uppercase">Mode: Predictive</p><p class="text-gray-400 text-sm leading-relaxed">Proyecta tu jubilación real cruzando datos de rentabilidad histórica y lagunas.</p></div>
                    <a href="simulador.html" class="mt-8 w-full block text-center btn-3d bg-acid text-ocean py-3 font-mono text-sm font-bold uppercase hover:bg-white transition-all">Calcular Ahora</a>
                </div>
                <div class="glass-panel p-8 rounded-none card-hover group relative flex flex-col justify-between h-[450px]">
                    <div class="absolute top-0 right-0 p-4 opacity-20"><i data-lucide="arrow-up-right" class="text-acid w-6 h-6"></i></div>
                    <div><div class="w-16 h-16 bg-oceanLight rounded-full flex items-center justify-center mb-6 border border-white/10 group-hover:border-acid/50 transition-colors"><i data-lucide="landmark" class="text-white w-8 h-8 group-hover:text-acid transition-colors"></i></div><h3 class="font-serif text-3xl text-white mb-2">Renta Privada</h3><p class="font-mono text-xs text-acid mb-4 uppercase">Mode: Investment</p><p class="text-gray-400 text-sm leading-relaxed">Estructura flujos de capital fuera del sistema de seguridad social AFP.</p></div>
                    <a href="rentaprivada.html" class="mt-8 w-full block text-center btn-3d bg-transparent border border-acid text-acid py-3 font-mono text-sm hover:bg-acid hover:text-ocean font-bold uppercase transition-all">Simular Renta</a>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="glass-panel p-8 rounded-none card-hover group relative flex flex-col justify-between h-[450px]">
                    <div class="absolute top-0 right-0 p-4 opacity-20"><i data-lucide="arrow-up-right" class="text-acid w-6 h-6"></i></div>
                    <div><div class="w-16 h-16 bg-oceanLight rounded-full flex items-center justify-center mb-6 border border-white/10 group-hover:border-acid/50 transition-colors"><i data-lucide="users" class="text-white w-8 h-8 group-hover:text-acid transition-colors"></i></div><h3 class="font-serif text-3xl text-white mb-2">PGU / Bono Hijo</h3><p class="font-mono text-xs text-acid mb-4 uppercase">Mode: State_Aid</p><p class="text-gray-400 text-sm leading-relaxed">Calcula la PGU y el estimador mensual de bono por hijo nacido vivo.</p></div>
                    <a href="pgu.html" class="mt-8 w-full block text-center btn-3d bg-transparent border border-acid text-acid py-3 font-mono text-sm hover:bg-acid hover:text-ocean font-bold uppercase transition-all">Consultar PGU</a>
                </div>
                <div class="glass-panel p-8 rounded-none card-hover group relative flex flex-col justify-between h-[450px] border-acid/10 shadow-[0_0_30px_rgba(204,255,0,0.02)]">
                    <div><div class="w-16 h-16 bg-oceanLight rounded-full flex items-center justify-center mb-6 border border-white/10 group-hover:border-acid/50 transition-colors"><i data-lucide="activity" class="text-white w-8 h-8 group-hover:text-acid transition-colors"></i></div><h3 class="font-serif text-3xl text-white mb-2">Exención Salud</h3><p class="font-mono text-xs text-acid mb-4 uppercase">Mode: Tax_Rebate</p><p class="text-gray-400 text-sm leading-relaxed">Verifica si calificas para la eliminación del 7% legal de salud.</p></div>
                    <a href="salud.html" class="mt-8 w-full block text-center btn-3d bg-transparent border border-acid text-acid py-3 font-mono text-sm hover:bg-acid hover:text-ocean font-bold uppercase transition-all">Verificar 7%</a>
                </div>
                <div class="glass-panel p-8 rounded-none card-hover group relative flex flex-col justify-between h-[450px]">
                    <div><div class="w-16 h-16 bg-oceanLight rounded-full flex items-center justify-center mb-6 border border-white/10 group-hover:border-acid/50 transition-colors"><i data-lucide="zap" class="text-white w-8 h-8 group-hover:text-acid transition-colors"></i></div><h3 class="font-serif text-3xl text-white mb-2">Eficiencia ELD</h3><p class="font-mono text-xs text-acid mb-4 uppercase">Mode: Optimization</p><p class="text-gray-400 text-sm leading-relaxed">Analizador de eficiencia tributaria para retiros de Excedentes de Libre Disposición.</p></div>
                    <a href="eld.html" class="mt-8 w-full block text-center btn-3d bg-transparent border border-acid text-acid py-3 font-mono text-sm hover:bg-acid hover:text-ocean font-bold uppercase transition-all">Iniciar Análisis</a>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN ACADEMIA (COMPLEMENTARIO) -->
    <section id="academia" class="py-24 relative overflow-hidden bg-oceanDark/20 border-t border-white/5">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex flex-col lg:flex-row justify-between items-end mb-16 gap-6">
                <div class="max-w-2xl">
                    <span class="font-mono text-acid text-xs tracking-[0.3em] uppercase mb-4 block">// RECURSOS_DE_ENABLEMENT</span>
                    <h2 class="font-serif text-5xl md:text-6xl text-white italic text-glow">Capacitación Técnica</h2>
                    <p class="text-gray-400 font-sans mt-4 leading-relaxed">Transferencia de conocimiento para potenciar el uso de nuestras soluciones. Formación complementaria en cumplimiento y bienestar financiero.</p>
                </div>
                <a href="academia.html" class="text-acid font-mono text-sm hover:underline flex items-center gap-2 uppercase tracking-widest mb-2">Explorar Academia <i data-lucide="arrow-right" class="w-4 h-4"></i></a>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-stretch">
                <!-- CURSO LEY KARIN (DESTACADO COMPLEMENTARIO) -->
                <div class="lg:col-span-7">
                    <div class="glass-panel p-8 md:p-12 h-full border-l-4 border-acid relative group overflow-hidden">
                        <div class="absolute -right-20 -top-20 w-64 h-64 bg-acid opacity-5 blur-3xl rounded-full"></div>
                        <div class="relative z-10">
                            <div class="flex items-center gap-3 mb-6">
                                <div class="p-3 bg-acid/10 rounded-xl text-acid">
                                    <i data-lucide="shield-alert" class="w-8 h-8"></i>
                                </div>
                                <span class="bg-acid text-ocean text-[10px] font-bold px-2 py-1 rounded uppercase tracking-widest font-mono">Formación B2B</span>
                            </div>
                            <h3 class="font-serif text-4xl text-white mb-6 italic leading-tight">Finanzas para el Buen Trato <br/><span class="text-acid">(Ley Karin)</span></h3>
                            <p class="text-gray-300 text-lg mb-8 leading-relaxed max-w-xl">
                                Programa complementario para empresas. Mitigamos el estrés financiero como detonante de conductas incívicas. Alineado con los protocolos de la <span class="text-white font-mono">Ley N° 21.643</span>.
                            </p>
                            <div class="flex flex-wrap gap-4 mb-10">
                                <div class="flex items-center gap-2 text-xs font-mono text-gray-400 bg-white/5 px-3 py-2 rounded">
                                    <i data-lucide="check" class="w-3 h-3 text-acid"></i> Contenido E-learning
                                </div>
                                <div class="flex items-center gap-2 text-xs font-mono text-gray-400 bg-white/5 px-3 py-2 rounded">
                                    <i data-lucide="check" class="w-3 h-3 text-acid"></i> Gestión de Riesgos
                                </div>
                                <div class="flex items-center gap-2 text-xs font-mono text-gray-400 bg-white/5 px-3 py-2 rounded">
                                    <i data-lucide="check" class="w-3 h-3 text-acid"></i> Reporte para RRHH
                                </div>
                            </div>
                            <a href="curso-finanzas-buen-trato.html" class="btn-3d inline-block bg-acid text-ocean font-bold px-10 py-4 rounded-xl text-xs uppercase tracking-widest font-mono">Detalles del Programa</a>
                        </div>
                    </div>
                </div>

                <!-- OTROS MÓDULOS -->
                <div class="lg:col-span-5 flex flex-col gap-6">
                    <!-- NUEVO CURSO REFORMA -->
                    <div class="glass-panel p-8 flex-1 border-l-4 border-white/20 hover:border-acid/50 transition-colors group">
                        <div class="flex justify-between items-start mb-4">
                            <span class="font-mono text-[10px] text-white/40 uppercase tracking-widest">Módulo 02</span>
                            <i data-lucide="landmark" class="w-5 h-5 text-gray-600 group-hover:text-acid transition-colors"></i>
                        </div>
                        <h4 class="font-serif text-2xl text-white mb-2 italic">Reforma de Pensiones</h4>
                        <p class="text-sm text-gray-500 mb-6 leading-relaxed">Análisis técnico de la Ley 21.735 y el nuevo sistema mixto (Vigencia 2026).</p>
                        <a href="curso-reforma-pensiones.html" class="text-xs font-mono text-acid uppercase tracking-widest flex items-center gap-2 group-hover:underline">Ver Programa <i data-lucide="chevron-right" class="w-3 h-3"></i></a>
                    </div>
                    
                    <div class="glass-panel p-8 flex-1 border-l-4 border-white/20 hover:border-acid/50 transition-colors group">
                        <div class="flex justify-between items-start mb-4">
                            <span class="font-mono text-[10px] text-white/40 uppercase tracking-widest">Tutorial 02</span>
                            <i data-lucide="trending-down" class="w-5 h-5 text-gray-600 group-hover:text-acid transition-colors"></i>
                        </div>
                        <h4 class="font-serif text-2xl text-white mb-2 italic">Estrategia ELD</h4>
                        <p class="text-sm text-gray-500 mb-6 leading-relaxed">Optimización tributaria avanzada para usuarios de nuestro simulador de excedentes.</p>
                        <a href="eld.html" class="text-xs font-mono text-acid uppercase tracking-widest flex items-center gap-2 group-hover:underline">Leer Guía <i data-lucide="chevron-right" class="w-3 h-3"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="blog" class="py-20 border-t border-white/5">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="font-serif text-4xl text-white mb-12">La Verdad <span class="font-sans text-lg text-gray-500 not-italic ml-4">// Artículos Recientes</span></h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-glow">
                
                <a href="apv-deuda.html" class="group cursor-pointer">
                    <article class="h-full flex flex-col">
                        <div class="h-48 w-full bg-oceanLight mb-4 border border-white/5 relative overflow-hidden rounded-lg">
                            <img src="https://raw.githubusercontent.com/ezunigacl/lajusta.cl-web/main/thumb.apv-deuda.png" 
                                 alt="Deuda Técnica APV" 
                                 class="absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-all duration-500 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-oceanDark/90 via-oceanDark/20 to-transparent"></div>
                            <div class="absolute bottom-4 left-4 font-mono text-[10px] bg-acid px-2 py-1 text-ocean font-bold z-10">18 DIC 2025</div>
                        </div>
                        <h3 class="font-serif text-2xl text-white group-hover:text-acid italic transition-colors leading-tight">Deuda Técnica: El costo de tu inercia</h3>
                        <p class="text-gray-500 text-sm mt-2 font-sans line-clamp-2">Análisis comparativo de comisiones: por qué tu inercia te cuesta hasta $3.500.000 a largo plazo.</p>
                        <span class="mt-auto pt-4 font-mono text-[10px] text-acid uppercase tracking-widest flex items-center gap-2">Leer análisis técnico <i data-lucide="arrow-right" class="w-3 h-3"></i></span>
                    </article>
                </a>

                <a href="mito-seguridad.html" class="group cursor-pointer">
                    <article class="h-full flex flex-col">
                        <div class="h-48 w-full bg-oceanLight mb-4 border border-white/5 relative overflow-hidden rounded-lg">
                            <img src="https://raw.githubusercontent.com/ezunigacl/lajusta.cl-web/main/thumb.mito-seguridad.png" 
                                 alt="El mito de la Seguridad" 
                                 class="absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-all duration-500 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-oceanDark/90 via-oceanDark/20 to-transparent"></div>
                            <div class="absolute bottom-4 left-4 font-mono text-[10px] bg-acid px-2 py-1 text-ocean font-bold z-10">05 DIC 2025</div>
                        </div>
                        <h3 class="font-serif text-2xl text-white group-hover:text-acid italic transition-colors leading-tight">El mito de la Seguridad</h3>
                        <p class="text-gray-500 text-sm mt-2 font-sans line-clamp-2">Por qué "seguridad" suele ser sinónimo de perder ante la inflación y el costo de oportunidad.</p>
                        <span class="mt-auto pt-4 font-mono text-[10px] text-acid uppercase tracking-widest flex items-center gap-2">Leer análisis técnico <i data-lucide="arrow-right" class="w-3 h-3"></i></span>
                    </article>
                </a>

                <a href="scomp-hacks.html" class="group cursor-pointer">
                    <article class="h-full flex flex-col">
                        <div class="h-48 w-full bg-oceanLight mb-4 border border-white/5 relative overflow-hidden rounded-lg">
                            <img src="https://raw.githubusercontent.com/ezunigacl/lajusta.cl-web/main/thumb.scomp-hacks.png" 
                                 alt="SCOMP Hacks" 
                                 class="absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-all duration-500 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-oceanDark/90 via-oceanDark/20 to-transparent"></div>
                            <div class="absolute bottom-4 left-4 font-mono text-[10px] bg-acid px-2 py-1 text-ocean font-bold z-10">01 DIC 2025</div>
                        </div>
                        <h3 class="font-serif text-2xl text-white group-hover:text-acid italic transition-colors leading-tight">SCOMP Hacks</h3>
                        <p class="text-gray-500 text-sm mt-2 font-sans line-clamp-2">Cómo leer el certificado para encontrar las brechas de mercado y mejorar tu pensión.</p>
                        <span class="mt-auto pt-4 font-mono text-[10px] text-acid uppercase tracking-widest flex items-center gap-2">Leer análisis técnico <i data-lucide="arrow-right" class="w-3 h-3"></i></span>
                    </article>
                </a>
            </div>
        </div>
    </section>

 <section id="login" class="py-24 bg-oceanDark relative border-t border-white/5">
        <div class="max-w-md mx-auto px-4 relative z-10">
            <div class="glass-panel p-1 border-acid/20 rounded-2xl overflow-hidden shadow-2xl">
                
                <!-- Pestañas de Alternancia -->
                <div class="flex border-b border-white/10 font-mono text-[10px] uppercase tracking-widest">
                    <button onclick="switchLoginView('login')" id="tab-login" class="flex-1 py-4 bg-oceanLight/50 text-acid border-b-2 border-acid font-bold">Ingreso</button>
                    <button onclick="switchLoginView('register')" id="tab-register" class="flex-1 py-4 text-gray-500 hover:text-white transition-colors">Registro Nuevo</button>
                </div>

                <div class="p-8 md:p-10 text-center">
                    <div id="login-header">
                        <div class="w-16 h-16 rounded-full bg-ocean border border-acid text-acid flex items-center justify-center mb-6 mx-auto shadow-[0_0_15px_rgba(204,255,0,0.2)]">
                            <i data-lucide="building-2" class="w-8 h-8"></i>
                        </div>
                        <h3 id="form-title" class="font-serif text-3xl text-white mb-2 italic">Acceso Corporativo</h3>
                        <p id="form-desc" class="text-gray-400 text-sm mb-8 font-sans">Ingresa las credenciales de tu empresa.</p>
                    </div>

                    <!-- FORMULARIO DE INGRESO -->
                    <form id="rrhh-login-form" class="space-y-4 text-left animate-fade-in">
                        <div>
                            <label class="block text-[10px] font-mono font-bold text-acid uppercase mb-1.5 ml-1">Email Corporativo</label>
                            <input type="email" id="login-email" class="input-premium w-full rounded-lg px-4 py-3 text-sm" placeholder="ejemplo@empresa.cl" required>
                        </div>
                        <div>
                            <label class="block text-[10px] font-mono font-bold text-acid uppercase mb-1.5 ml-1">Contraseña</label>
                            <input type="password" id="login-pass" class="input-premium w-full rounded-lg px-4 py-3 text-sm" placeholder="••••••••" required>
                        </div>
                        <div class="pt-4">
                            <!-- Botón que redirige a dashboard.html tras validación -->
                            <button type="submit" class="btn-3d w-full bg-acid text-ocean py-4 font-mono text-sm font-bold uppercase hover:bg-white transition-all">
                                ENTRAR AL SISTEMA
                            </button>
                        </div>
                    </form>

                    <!-- FORMULARIO DE REGISTRO -->
                    <form id="rrhh-register-form" class="hidden space-y-4 text-left animate-fade-in">
                        <div>
                            <label class="block text-[10px] font-mono font-bold text-acid uppercase mb-1.5 ml-1">ID de Convenio / Alianza</label>
                            <input type="text" id="reg-convenio" class="input-premium w-full rounded-lg px-4 py-3 text-sm" placeholder="ID-2025-XXXX" required>
                        </div>
                        <div>
                            <label class="block text-[10px] font-mono font-bold text-acid uppercase mb-1.5 ml-1">Email Corporativo</label>
                            <input type="email" id="reg-email" class="input-premium w-full rounded-lg px-4 py-3 text-sm" placeholder="nombre@empresa.cl" required>
                        </div>
                        <div>
                            <label class="block text-[10px] font-mono font-bold text-acid uppercase mb-1.5 ml-1">Nueva Contraseña</label>
                            <input type="password" id="reg-pass" class="input-premium w-full rounded-lg px-4 py-3 text-sm" placeholder="Mínimo 6 caracteres" required>
                        </div>
                        <div class="pt-4">
                            <button type="submit" class="btn-3d w-full bg-white text-ocean py-4 font-mono text-sm font-bold uppercase hover:bg-acid transition-all">
                                CREAR CUENTA CORPORATIVA
                            </button>
                        </div>
                    </form>

                    <p class="mt-8 text-[10px] text-gray-500 font-mono uppercase tracking-wider">
                        ¿Problemas con el ID? <br>
                        <a href="mailto:soporte@lajusta.cl" class="text-acid hover:underline">Contactar a soporte</a>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-oceanDark pt-16 pb-8 border-t border-white/10 text-sm mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center md:text-left">
            <div class="grid grid-cols-1 md:col-span-4 gap-12 mb-12">
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center gap-3 mb-4 justify-center md:justify-start">
                        <img src="Logo.jpg" alt="Logo" class="h-10 w-10 rounded-md border border-white/10 opacity-80 grayscale hover:grayscale-0 transition-all">
                        <span class="font-serif text-3xl text-white italic tracking-wide">La Justa.</span>
                    </div>
                    <p class="text-gray-500 max-w-sm font-sans">Reingeniería financiera para una nueva generación.</p>
                </div>
                <div><h4 class="font-mono text-acid text-xs uppercase mb-4 tracking-widest">Navegación</h4><ul class="space-y-2 font-mono text-gray-400"><li><a href="simulador.html" class="hover:text-white transition-colors">Simuladores</a></li><li><a href="#" class="hover:text-white transition-colors">Metodología</a></li></ul></div>
                <div><h4 class="font-mono text-acid text-xs uppercase mb-4 tracking-widest">Legal</h4><ul class="space-y-2 font-mono text-gray-400"><li><a href="#" class="hover:text-white transition-colors">Términos</a></li><li><a href="#" class="hover:text-white transition-colors">Privacidad</a></li></ul></div>
            </div>
            <div class="border-t border-white/5 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-600 font-mono"><p>&copy; 2025 La Justa Fintech SpA. Todos los derechos reservados.</p><p class="mt-2 md:mt-0 max-w-lg">DISCLAIMER: Las proyecciones son referenciales.</p></div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
        let exGender = 'M';
        const PGU_MONTO = 214296;
        const modal = document.getElementById('expressModal');
        const formDiv = document.getElementById('express-form');
        const resultDiv = document.getElementById('express-result');

        function showMessage(message, type = 'error') {
            const msgBox = document.getElementById('messageBox');
            const msgText = document.getElementById('messageText');
            const contentBox = document.getElementById('messageBoxContent');
            msgText.innerText = message;
            msgBox.classList.remove('hidden');
            const themeClass = type === 'error' ? 'bg-red-900/80 border border-red-700/80 text-white' : 'bg-green-900/80 border border-green-700/80 text-acid';
            contentBox.className = `p-4 rounded-xl shadow-xl ${themeClass}`;
            setTimeout(() => { msgBox.classList.add('hidden'); }, 4000);
        }

        function toggleExpressModal() {
            const isHidden = modal.classList.contains('hidden');
            if (isHidden) {
                modal.classList.remove('hidden');
                modal.classList.remove('animate-modal-close');
                document.body.style.overflow = 'hidden';
                document.getElementById('modalUFShow').innerText = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', maximumFractionDigits: 2 }).format(currentUF);
                setExGender(exGender);
                resetExpress();
            } else {
                modal.classList.add('animate-modal-close');
                setTimeout(() => { modal.classList.add('hidden'); modal.classList.remove('animate-modal-close'); document.body.style.overflow = ''; }, 300);
            }
        }

        function setExGender(g) {
            exGender = g;
            const bM = document.getElementById('ex-btn-M'), bF = document.getElementById('ex-btn-F');
            [bM, bF].forEach(b => b.className = "flex-1 border border-white/10 bg-oceanLight/50 text-xs font-bold text-white/70 transition-colors rounded-lg hover:bg-oceanLight/80");
            const active = g === 'M' ? bM : bF;
            active.className = "flex-1 border border-acid bg-acid text-ocean text-xs font-bold transition-colors rounded-lg";
        }

        function formatExCLP(i) { 
            let v = i.value.replace(/\D/g, ''); 
            i.value = v ? new Intl.NumberFormat('es-CL').format(v) : ''; 
        }

        function resetExpress() { resultDiv.classList.add('hidden'); formDiv.classList.remove('hidden'); resultDiv.classList.remove('animate-fade-in-up'); }

        function calcularExpress() {
            const balanceRaw = document.getElementById('ex-saldo').value.replace(/\./g, '');
            const balance = parseInt(balanceRaw) || 0;
            const age = parseInt(document.getElementById('ex-edad').value);
            const includePgu = document.getElementById('ex-pgu-toggle').checked;
            if (!age || age < 18 || age > 99) { showMessage("Por favor, ingresa una edad válida (18-99).", 'error'); return; }
            if (balance < 1000000) { showMessage("Por favor, ingresa el saldo total estimado (mínimo $1.000.000).", 'error'); return; }
            const retAge = (exGender === 'M') ? 65 : 60;
            const r = 0.042;
            let startingAge = Math.max(age, retAge);
            let yearsToLive = Math.max((exGender === 'M' ? 88 : 93) - startingAge, 5); 
            let cnuFactor = (1 - Math.pow(1 + r, -yearsToLive)) / r;
            let totalMonto = (((balance / currentUF) / (cnuFactor * 12)) * 0.92 * currentUF);
            if (includePgu && age >= 65) totalMonto += PGU_MONTO;
            document.getElementById('ex-resultado-monto').innerText = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', maximumFractionDigits: 0 }).format(totalMonto);
            formDiv.classList.add('hidden');
            resultDiv.classList.remove('hidden');
            resultDiv.classList.add('animate-fade-in-up');
        }

        async function fetchFinancialIndicators() {
            try {
                const response = await fetch('https://mindicador.cl/api');
                if (response.ok) {
                    const data = await response.json();
                    currentUF = data.uf.valor;
                    document.getElementById('navUF').innerText = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', maximumFractionDigits: 0 }).format(currentUF);
                    document.getElementById('navUTM').innerText = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', maximumFractionDigits: 0 }).format(data.utm.valor);
                    document.getElementById('navUF').classList.remove('animate-pulse');
                    document.getElementById('navUTM').classList.remove('animate-pulse');
                }
            } catch (e) { document.getElementById('navUF').innerText = `$${defaultUFValue.toFixed(0)}`; }
        }

        document.addEventListener('DOMContentLoaded', () => { fetchFinancialIndicators(); lucide.createIcons(); });
    </script>

    <!-- FIREBASE AUTHENTICATION MODULE -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } 
        from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDdRWDUd-Ocmdqm3X0qMQBDU_O3yDBkGl4",
            authDomain: "lajusta-web.firebaseapp.com",
            projectId: "lajusta-web",
            storageBucket: "lajusta-web.firebasestorage.app",
            messagingSenderId: "231604835302",
            appId: "1:231604835302:web:70cdaee46afb20f9123c27",
            measurementId: "G-192LPZTRCR"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        window.loginWithGoogle = async () => {
            if (window.location.protocol === 'file:') {
                alert("Error Crítico: Firebase Auth NO funciona al abrir el archivo directamente (file://).");
                return;
            }
            try {
                const result = await signInWithPopup(auth, provider);
                const user = result.user;
                updateUI(user);
            } catch (error) {
                console.error("Error en login:", error);
            }
        };

        window.logout = () => {
            signOut(auth).then(() => {
                updateUI(null);
            });
        };

        onAuthStateChanged(auth, (user) => {
            updateUI(user);
        });

        function updateUI(user) {
            const loginSectionBtn = document.getElementById('btn-client-login');
            const navLoginBtnDesktop = document.getElementById('nav-login-desktop'); 
            const navLoginBtnMobile = document.getElementById('nav-login-mobile'); 
            const sectionTitle = document.querySelector('#login h3'); 
            
            if (user) {
                if(sectionTitle) sectionTitle.innerText = `Hola, ${user.displayName.split(' ')[0]}`;
                if(loginSectionBtn) {
                    loginSectionBtn.innerText = "CERRAR SESIÓN";
                    const newBtn = loginSectionBtn.cloneNode(true);
                    loginSectionBtn.parentNode.replaceChild(newBtn, loginSectionBtn);
                    newBtn.onclick = window.logout;
                    newBtn.classList.replace('bg-acid', 'bg-red-500'); 
                    newBtn.classList.replace('text-ocean', 'text-white');
                }
                if(navLoginBtnDesktop) { navLoginBtnDesktop.innerText = "MI CUENTA"; navLoginBtnDesktop.classList.add('text-acid'); }
                if(navLoginBtnMobile) { navLoginBtnMobile.innerText = "MI CUENTA"; navLoginBtnMobile.classList.add('text-acid'); }
            } else {
                if(sectionTitle) sectionTitle.innerText = "Soy Cliente";
                if(loginSectionBtn) {
                    loginSectionBtn.innerText = "ENTRAR CON GOOGLE";
                    const newBtn = loginSectionBtn.cloneNode(true);
                    loginSectionBtn.parentNode.replaceChild(newBtn, loginSectionBtn);
                    newBtn.onclick = window.loginWithGoogle;
                    newBtn.classList.replace('bg-red-500', 'bg-acid');
                    newBtn.classList.replace('text-white', 'text-ocean');
                }
                if(navLoginBtnDesktop) { navLoginBtnDesktop.innerText = "ACCESO"; navLoginBtnDesktop.classList.remove('text-acid'); }
                if(navLoginBtnMobile) { navLoginBtnMobile.innerText = "ACCESO"; navLoginBtnMobile.classList.remove('text-acid'); }
            }
        }
    </script>
</body>
</html>
